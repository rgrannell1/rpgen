
"use strict"




const crypto = require('crypto')




/*
convert 4 bytes into a 32 bit unsigned integer.
*/

const convertBytesToInteger = buffer => {
	return buffer.readUInt32BE( ) / Math.pow(2, 32)
}





/*

map random bytes onto random numbers in the range `0...upperBound`.

there are 8 bits per byte, so we need to request a number of bytes n such that
2 ^ (8 x n) is equal to or larger than the input `upperBound`.

*/

const rand = callback => {

	crypto.randomBytes(4, (err, buffer) => {
		callback(err, convertBytesToInteger(buffer))
	})

}




module.exports = rand
