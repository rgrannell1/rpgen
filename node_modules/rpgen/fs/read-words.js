
"use strict"




const fs        = require('fs')
const constants = require('rpgen/commons/constants')




const readWords = (fpath, callback) => {

	if (fpath) {
		readWords.fs(fpath, callback)
	} else {
		readWords.stdin(callback)
	}

}

readWords.fs = (fpath, callback) => {
	fs.readFile(fpath, callback)
}

readWords.stdin = callback => {

	var data = [ ]

	process.stdin.on('readable', ( ) => {

		var chunk = process.stdin.read( )

		// if (is.null(chunk)) {
		if (chunk === null) {
			return
		}

		for (var ith = 0; ith < chunk.length; ++ith) {

			if (chunk[ith] === constants.charCodes.NEWLINE) {

				callback(Buffer(data).toString( ))
				data = [ ]

			} else {
				data.push(chunk[ith])
			}

		}

	})

}




module.exports = readWords
